# El Caption

![El Caption PNG](./elCaption.png)

**El Caption** is a cross-platform image captioning tool designed to help users prepare datasets for model training. Whether you're creating training data for AI models or just organizing your image captions, this tool simplifies the process.

## Getting Started

### Prerequisites

* [Python3](https://www.python.org/downloads/)
* [git](https://git-scm.com/downloads)

### Setup

```
git clone git@github.com:Hamilton-dfp/el-caption.git
cd el-caption
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### Running
Run the application with the following command:
```
python el_caption.py
```

## Usage

### Preparing Your Dataset
El Caption processes directories containing `.png` image files and their corresponding `.txt` files. Each `.txt` file contains captions for the image of the same name. 

For example, if you have an image file `elCaption.png`, its captions would be stored in `elCaption.txt`:

**elCaption.txt**
```
orange hair, hat, winking, peace sign, red eyes
```

### Instructions

* Enter the directory containing your images and captions in the text field at the top. Or use the "Browse" button to select the directory from your File System.
* Press the "Process Images and Tags" button. It may take a few seconds to load large image sets.

After the images are loaded, you will see four panels on the bottom of the screen:

* Images
* Selected Image
* Image Tags
* All Tags

#### Images

This grid shows the thumbnails of all your images. When you select an image it will display in the "Selected Image" section.

You can use the filter to select images. The filter supports the following operations:

* **And Filtering** is performed by comma separation. For example `orange hair, red eyes` will return all images captioned with both `orange hair` and `red eyes` tags.
* **Or Filtering** is performed using the `OR` keyword. `orange hair OR red eyes` will return all images that are captioned with `orange hair` or the `red eyes` tags.
* **Not Filtering** is performed using `!(<caption>)`. `!(orange hair)` will return all images that do NOT have the `orange hair` tag.

Combine these filters to identify images that have or are missing key captions across your data set.

#### Selected Image

When you select an image in the Images grid, it will be displayed here.

#### Image Tags

This displays all the tags associated with the selected image. Double click a tag to remove it from the image.

You can add a new tag with the "Add Tag" text field and button on the bottom. New tags can only be added to images, however once added they also appear in the "All Tags" section to be added to other tags.

Tags are displayed in the order they exist in the `.txt` file.

#### All Tags

Use the All Tags section to ensure you are captioning consistently across all your images. Double click a tag to add it to the selected image.

Use the search field at the top to find tags quickly.

Tags highlighted in green are tags that are displayed in your current image.

If you select a tag that is in your current image in the "All Tags" section, the selected tag will be highlighted in the "Image Tags" section.

Right clicking on a tag in the "All Tags" section brings up some additional functionality:

##### Rename

Renaming a tag in the "All Tags" section will rename that tag and update it in all `.txt` files that contain that tag. If you rename a tag to an existing tag, it will automatically be "merged" with that tag, in that they will now both be considered the same tag.

##### Delete

Deleting a tag in the "All Tags" section will remove that tag from all `.txt` files in the collection.

##### Filter

Use the "Filter" option to quickly filter the image grid by all images that contain that tag. This will replace any existing filter.

## Roadmap

* Add support for `.jpg` and `.webp` file formats.
* Implement tag reordering and shuffling.
* Optimize performance for datasets exceeding 1,000 images.

## Credits
- **Tool Design**: Developed collaboratively with ChatGPT-4.
- **Icon Design**: Generated by ChatGPT, featuring an anime ship captain with a dynamic pose to reflect the app's vibrant functionality.

## Disclaimers
This project began as an experiment to see how far I could go with ChatGPT-generated code. Surprisingly, the entire first version of El Caption, including its UI and functionality, was built through a collaborative process with GPT-4.

The tool and its icon were AI-generated, but all debugging, testing, and customization reflect my contributions.
